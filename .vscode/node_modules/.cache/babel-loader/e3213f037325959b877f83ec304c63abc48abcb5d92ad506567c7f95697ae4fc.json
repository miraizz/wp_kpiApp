{"ast":null,"code":"var _jsxFileName = \"/Users/muhamadaliff/Desktop/wp_kpiApp-afiq 2/src/components/SessionManager.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Notification from './Notifications';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SessionManager = () => {\n  _s();\n  const [expired, setExpired] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const user = sessionStorage.getItem('user');\n    if (!user) return;\n    let timeout;\n    const resetTimer = () => {\n      clearTimeout(timeout);\n      timeout = setTimeout(() => {\n        sessionStorage.clear();\n        setExpired(true);\n        setTimeout(() => navigate('/'), 2000);\n      }, 60000); // 60 seconds\n    };\n    const events = ['mousemove', 'keydown', 'click'];\n    events.forEach(e => window.addEventListener(e, resetTimer));\n    resetTimer();\n    return () => {\n      clearTimeout(timeout);\n      events.forEach(e => window.removeEventListener(e, resetTimer));\n    };\n  }, [navigate]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: expired && /*#__PURE__*/_jsxDEV(Notification, {\n      message: \"Session expired due to inactivity. Please login again.\",\n      type: \"error\",\n      onClose: () => setExpired(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(SessionManager, \"5FxMVEUAnoQ8G+PwhdKRnHONzmg=\", false, function () {\n  return [useNavigate];\n});\n_c = SessionManager;\nexport default SessionManager;\nvar _c;\n$RefreshReg$(_c, \"SessionManager\");","map":{"version":3,"names":["useEffect","useState","useNavigate","Notification","jsxDEV","_jsxDEV","Fragment","_Fragment","SessionManager","_s","expired","setExpired","navigate","user","sessionStorage","getItem","timeout","resetTimer","clearTimeout","setTimeout","clear","events","forEach","e","window","addEventListener","removeEventListener","children","message","type","onClose","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/muhamadaliff/Desktop/wp_kpiApp-afiq 2/src/components/SessionManager.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Notification from './Notifications';\n\nconst SessionManager = () => {\n  const [expired, setExpired] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const user = sessionStorage.getItem('user');\n    if (!user) return;\n\n    let timeout;\n\n    const resetTimer = () => {\n      clearTimeout(timeout);\n      timeout = setTimeout(() => {\n        sessionStorage.clear();\n        setExpired(true);\n        setTimeout(() => navigate('/'), 2000);\n      }, 60000); // 60 seconds\n    };\n\n    const events = ['mousemove', 'keydown', 'click'];\n    events.forEach((e) => window.addEventListener(e, resetTimer));\n\n    resetTimer();\n\n    return () => {\n      clearTimeout(timeout);\n      events.forEach((e) => window.removeEventListener(e, resetTimer));\n    };\n  }, [navigate]);\n\n  return (\n    <>\n      {expired && (\n        <Notification\n          message=\"Session expired due to inactivity. Please login again.\"\n          type=\"error\"\n          onClose={() => setExpired(false)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default SessionManager;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,YAAY,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE3C,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAMW,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACd,MAAMa,IAAI,GAAGC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC;IAC3C,IAAI,CAACF,IAAI,EAAE;IAEX,IAAIG,OAAO;IAEX,MAAMC,UAAU,GAAGA,CAAA,KAAM;MACvBC,YAAY,CAACF,OAAO,CAAC;MACrBA,OAAO,GAAGG,UAAU,CAAC,MAAM;QACzBL,cAAc,CAACM,KAAK,CAAC,CAAC;QACtBT,UAAU,CAAC,IAAI,CAAC;QAChBQ,UAAU,CAAC,MAAMP,QAAQ,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC;MACvC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;IACb,CAAC;IAED,MAAMS,MAAM,GAAG,CAAC,WAAW,EAAE,SAAS,EAAE,OAAO,CAAC;IAChDA,MAAM,CAACC,OAAO,CAAEC,CAAC,IAAKC,MAAM,CAACC,gBAAgB,CAACF,CAAC,EAAEN,UAAU,CAAC,CAAC;IAE7DA,UAAU,CAAC,CAAC;IAEZ,OAAO,MAAM;MACXC,YAAY,CAACF,OAAO,CAAC;MACrBK,MAAM,CAACC,OAAO,CAAEC,CAAC,IAAKC,MAAM,CAACE,mBAAmB,CAACH,CAAC,EAAEN,UAAU,CAAC,CAAC;IAClE,CAAC;EACH,CAAC,EAAE,CAACL,QAAQ,CAAC,CAAC;EAEd,oBACEP,OAAA,CAAAE,SAAA;IAAAoB,QAAA,EACGjB,OAAO,iBACNL,OAAA,CAACF,YAAY;MACXyB,OAAO,EAAC,wDAAwD;MAChEC,IAAI,EAAC,OAAO;MACZC,OAAO,EAAEA,CAAA,KAAMnB,UAAU,CAAC,KAAK;IAAE;MAAAoB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC;EACF,gBACD,CAAC;AAEP,CAAC;AAACzB,EAAA,CAzCID,cAAc;EAAA,QAEDN,WAAW;AAAA;AAAAiC,EAAA,GAFxB3B,cAAc;AA2CpB,eAAeA,cAAc;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}