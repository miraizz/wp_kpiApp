{"ast":null,"code":"var _jsxFileName = \"/Users/muhamadaliff/Documents/GitHub/wp_kpiApp/Untitled/client/src/pages/KPIManagement.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './KPIManagement.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst KPIManagement = () => {\n  _s();\n  const [kpis, setKpis] = useState([]);\n  const [filterDept, setFilterDept] = useState('all');\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    staffId: '',\n    staffName: '',\n    department: '',\n    managerName: '',\n    managerId: '',\n    startDate: '',\n    endDate: '',\n    category: '',\n    priority: ''\n  });\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [editId, setEditId] = useState(null);\n  const [detailsId, setDetailsId] = useState(null);\n  const [confirmDeleteId, setConfirmDeleteId] = useState(null);\n  useEffect(() => {\n    fetch('http://localhost:5050/api/kpi').then(res => res.json()).then(data => setKpis(data)).catch(err => console.error('Error loading KPIs:', err));\n  }, []);\n  const openForm = (edit = false, id = null) => {\n    if (edit) {\n      var _kpi$startDate, _kpi$dueDate;\n      const kpi = kpis.find(k => k.id === id);\n      setFormData({\n        title: kpi.title,\n        description: kpi.description,\n        staffId: kpi.assignedTo.staffId,\n        staffName: kpi.assignedTo.name,\n        department: kpi.assignedTo.department,\n        managerName: kpi.assignedBy.name,\n        managerId: kpi.assignedBy.managerId,\n        startDate: (_kpi$startDate = kpi.startDate) === null || _kpi$startDate === void 0 ? void 0 : _kpi$startDate.slice(0, 10),\n        endDate: (_kpi$dueDate = kpi.dueDate) === null || _kpi$dueDate === void 0 ? void 0 : _kpi$dueDate.slice(0, 10),\n        category: kpi.category,\n        priority: kpi.priority\n      });\n      setEditId(id);\n      setIsEditMode(true);\n    } else {\n      setFormData({\n        title: '',\n        description: '',\n        staffId: '',\n        staffName: '',\n        department: '',\n        managerName: '',\n        managerId: '',\n        startDate: '',\n        endDate: '',\n        category: '',\n        priority: ''\n      });\n      setIsEditMode(false);\n      setEditId(null);\n    }\n    setIsPopupOpen(true);\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const url = isEditMode ? `/api/kpi/${editId}` : '/api/kpi';\n    const method = isEditMode ? 'PUT' : 'POST';\n    const payload = {\n      title: formData.title,\n      description: formData.description || '',\n      category: formData.category,\n      priority: formData.priority,\n      startDate: formData.startDate,\n      dueDate: formData.endDate,\n      status: 'On Track',\n      progress: 0,\n      assignedTo: {\n        name: formData.staffName,\n        staffId: formData.staffId,\n        department: formData.department\n      },\n      assignedBy: {\n        name: formData.managerName,\n        managerId: formData.managerId\n      }\n    };\n    try {\n      const res = await fetch(`http://localhost:5050${url}`, {\n        method,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Failed to save KPI');\n      setKpis(prev => isEditMode ? prev.map(k => k.id === editId ? data : k) : [...prev, data]);\n      setIsPopupOpen(false);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n  const confirmDelete = async () => {\n    try {\n      const res = await fetch(`http://localhost:5050/api/kpi/${confirmDeleteId}`, {\n        method: 'DELETE'\n      });\n      if (!res.ok) throw new Error('Delete failed');\n      setKpis(prev => prev.filter(kpi => kpi.id !== confirmDeleteId));\n      setConfirmDeleteId(null);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n  const renderBadge = priority => {\n    let className = 'status-badge ';\n    if (priority === 'High') className += 'high';else if (priority === 'Medium') className += 'medium';else className += 'low';\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: className,\n      children: priority\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 12\n    }, this);\n  };\n  const filteredKPIs = kpis.filter(kpi => filterDept === 'all' || kpi.assignedTo.department === filterDept);\n\n  // ... [Render JSX from original unchanged part: table, modals, forms, etc.]\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n};\n_s(KPIManagement, \"9djdYMJhG76u7EHU6HnwEzlfHtY=\");\n_c = KPIManagement;\nexport default KPIManagement;\nvar _c;\n$RefreshReg$(_c, \"KPIManagement\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","KPIManagement","_s","kpis","setKpis","filterDept","setFilterDept","formData","setFormData","title","description","staffId","staffName","department","managerName","managerId","startDate","endDate","category","priority","isPopupOpen","setIsPopupOpen","isEditMode","setIsEditMode","editId","setEditId","detailsId","setDetailsId","confirmDeleteId","setConfirmDeleteId","fetch","then","res","json","data","catch","err","console","error","openForm","edit","id","_kpi$startDate","_kpi$dueDate","kpi","find","k","assignedTo","name","assignedBy","slice","dueDate","handleChange","e","value","target","prev","handleSubmit","preventDefault","url","method","payload","status","progress","headers","body","JSON","stringify","ok","Error","map","message","confirmDelete","filter","renderBadge","className","children","fileName","_jsxFileName","lineNumber","columnNumber","filteredKPIs","_c","$RefreshReg$"],"sources":["/Users/muhamadaliff/Documents/GitHub/wp_kpiApp/Untitled/client/src/pages/KPIManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './KPIManagement.css';\n\nconst KPIManagement = () => {\n  const [kpis, setKpis] = useState([]);\n  const [filterDept, setFilterDept] = useState('all');\n  const [formData, setFormData] = useState({\n    title: '', description: '', staffId: '', staffName: '', department: '',\n    managerName: '', managerId: '', startDate: '', endDate: '', category: '', priority: ''\n  });\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [editId, setEditId] = useState(null);\n  const [detailsId, setDetailsId] = useState(null);\n  const [confirmDeleteId, setConfirmDeleteId] = useState(null);\n\n  useEffect(() => {\n    fetch('http://localhost:5050/api/kpi')\n      .then(res => res.json())\n      .then(data => setKpis(data))\n      .catch(err => console.error('Error loading KPIs:', err));\n  }, []);\n\n  const openForm = (edit = false, id = null) => {\n    if (edit) {\n      const kpi = kpis.find(k => k.id === id);\n      setFormData({\n        title: kpi.title, description: kpi.description, staffId: kpi.assignedTo.staffId,\n        staffName: kpi.assignedTo.name, department: kpi.assignedTo.department,\n        managerName: kpi.assignedBy.name, managerId: kpi.assignedBy.managerId,\n        startDate: kpi.startDate?.slice(0, 10), endDate: kpi.dueDate?.slice(0, 10),\n        category: kpi.category, priority: kpi.priority\n      });\n      setEditId(id);\n      setIsEditMode(true);\n    } else {\n      setFormData({\n        title: '', description: '', staffId: '', staffName: '', department: '',\n        managerName: '', managerId: '', startDate: '', endDate: '', category: '', priority: ''\n      });\n      setIsEditMode(false);\n      setEditId(null);\n    }\n    setIsPopupOpen(true);\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const url = isEditMode ? `/api/kpi/${editId}` : '/api/kpi';\n    const method = isEditMode ? 'PUT' : 'POST';\n\n    const payload = {\n      title: formData.title,\n      description: formData.description || '',\n      category: formData.category,\n      priority: formData.priority,\n      startDate: formData.startDate,\n      dueDate: formData.endDate,\n      status: 'On Track',\n      progress: 0,\n      assignedTo: {\n        name: formData.staffName,\n        staffId: formData.staffId,\n        department: formData.department\n      },\n      assignedBy: {\n        name: formData.managerName,\n        managerId: formData.managerId\n      }\n    };\n\n    try {\n      const res = await fetch(`http://localhost:5050${url}`, {\n        method,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Failed to save KPI');\n\n      setKpis(prev => isEditMode\n        ? prev.map(k => (k.id === editId ? data : k))\n        : [...prev, data]);\n      setIsPopupOpen(false);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const confirmDelete = async () => {\n    try {\n      const res = await fetch(`http://localhost:5050/api/kpi/${confirmDeleteId}`, {\n        method: 'DELETE'\n      });\n      if (!res.ok) throw new Error('Delete failed');\n\n      setKpis(prev => prev.filter(kpi => kpi.id !== confirmDeleteId));\n      setConfirmDeleteId(null);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const renderBadge = (priority) => {\n    let className = 'status-badge ';\n    if (priority === 'High') className += 'high';\n    else if (priority === 'Medium') className += 'medium';\n    else className += 'low';\n    return <span className={className}>{priority}</span>;\n  };\n\n  const filteredKPIs = kpis.filter(kpi => filterDept === 'all' || kpi.assignedTo.department === filterDept);\n\n  // ... [Render JSX from original unchanged part: table, modals, forms, etc.]\n\n  return (\n    <div className=\"container\">\n      {/* You can reuse your original JSX here as the return structure remains unchanged */}\n    </div>\n  );\n};\n\nexport default KPIManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}